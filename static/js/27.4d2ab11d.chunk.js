(this["webpackJsonpKch-react-admin-dashboard"]=this["webpackJsonpKch-react-admin-dashboard"]||[]).push([[27],{728:function(e,t,s){"use strict";s.r(t);var c=s(2),r=s(3),a=s(13),n=s(26),i=s(91),l=s(475),o=s(473),d=s(128),j=s(129),b=s(138),m=s(559),u=s(1),h=s(10),x=function(e){var t=e.name;return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{className:"toastify-header",children:Object(h.jsx)("div",{className:"title-wrapper",children:Object(h.jsxs)("h6",{className:"toast-title fw-bold",children:["You have successfully Added ",t.toUpperCase()]})})})})},O=function(e){var t=e.name;return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{className:"toastify-header",children:Object(h.jsx)("div",{className:"title-wrapper",children:Object(h.jsx)("h6",{className:"toast-title fw-bold",children:t})})})})};t.default=function(){var e=Object(d.b)(),t=Object(o.useHistory)(),s=Object(u.useState)(!1),p=Object(n.a)(s,2),f=p[0],v=p[1],y=Object(u.useState)(""),N=Object(n.a)(y,2),g=N[0],C=N[1],w=Object(u.useState)(null),S=Object(n.a)(w,2),D=S[0],P=S[1],k=Object(l.b)({defaultValues:{pinCode:"",district:"",countryName:""}}),B=k.reset,F=k.control,A=k.setError,J=k.handleSubmit,q=k.formState.errors,U=function(){var e=Object(r.a)(Object(c.a)().mark((function e(t){var s,r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=t.target.files[0],"xlsx"===(null===(r=null===s||void 0===s?void 0:s.name.split(".")[1])||void 0===r?void 0:r.toLowerCase())||"xls"===(null===r||void 0===r?void 0:r.toLowerCase())||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===(null===s||void 0===s?void 0:s.type)?(C(s.name),P(s)):j.c.error(Object(h.jsx)(O,{name:"File. File must be xlsx or xls"}),{icon:!1,transition:j.a,hideProgressBar:!0,autoClose:2e3});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(u.useEffect)((function(){console.log(f),f||(P(null),C(""))}),[f]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"text-end mb-2",children:Object(h.jsxs)(i.b,{type:"submit",className:"me-1",color:"primary",onClick:function(){return v(!0)},children:[Object(h.jsx)(m.a,{size:20}),Object(h.jsx)("span",{children:"Upload Codes"})]})}),Object(h.jsx)("div",{className:"text-center mb-2",children:Object(h.jsx)("h1",{className:"mb-1",children:"Add Delivery Code"})}),Object(h.jsx)(i.n,{onSubmit:J((function(s){if(Object.values(s).every((function(e){return e.length>0})))e(Object(b.a)(Object(a.a)({},s))).then((function(e){e.payload.error?j.c.error(Object(h.jsx)(O,{name:e.payload.error||e.payload.username||"John Doe"}),{icon:!1,transition:j.a,hideProgressBar:!0,autoClose:2e3}):(t.push("/delivery"),j.c.success(Object(h.jsx)(x,{name:e.payload.record.district||e.payload.username||"John Doe"}),{icon:!1,transition:j.a,hideProgressBar:!0,autoClose:2e3}))}));else for(var c in s)0===s[c].length&&A(c,{type:"manual"})})),children:Object(h.jsxs)(i.A,{className:"gy-1 pt-75",children:[Object(h.jsxs)(i.h,{md:12,xs:12,children:[Object(h.jsx)(i.t,{className:"form-label",for:"pinCode",children:"PinCode"}),Object(h.jsx)(l.a,{control:F,type:"pinCode",id:"pinCode",name:"pinCode",render:function(e){var t=e.field;return Object(h.jsx)(i.q,Object(a.a)(Object(a.a)({},t),{},{id:"pinCode",placeholder:"46512",invalid:q.pinCode&&!0}))}})]}),Object(h.jsxs)(i.h,{md:12,xs:12,children:[Object(h.jsx)(i.t,{className:"form-label",for:"district",children:"District"}),Object(h.jsx)(l.a,{control:F,type:"district",id:"district",name:"district",render:function(e){var t=e.field;return Object(h.jsx)(i.q,Object(a.a)(Object(a.a)({},t),{},{id:"district",placeholder:"Delhi",invalid:q.district&&!0}))}})]}),Object(h.jsxs)(i.h,{md:12,xs:12,children:[Object(h.jsx)(i.t,{className:"form-label",for:"countryName",children:"Country Name"}),Object(h.jsx)(l.a,{control:F,type:"countryName",id:"countryName",name:"countryName",render:function(e){var t=e.field;return Object(h.jsx)(i.q,Object(a.a)(Object(a.a)({},t),{},{id:"countryName",placeholder:"India",invalid:q.countryName&&!0}))}})]}),Object(h.jsxs)(i.h,{xs:12,className:"text-start mt-2 pt-50",children:[Object(h.jsx)(i.b,{type:"submit",className:"me-1",color:"primary",children:"Submit"}),Object(h.jsx)(i.b,{type:"reset",color:"secondary",outline:!0,onClick:function(){B({pinCode:"",district:"",countryName:""}),t.push("/delivery")},children:"Discard"})]})]})}),Object(h.jsxs)(i.u,{isOpen:f,toggle:function(){return v(!f)},className:"modal-dialog-centered modal-lg",children:[Object(h.jsx)(i.w,{className:"bg-transparent",toggle:function(){return v(!f)}}),Object(h.jsxs)(i.v,{className:"px-sm-5 pt-50 pb-5",children:[Object(h.jsx)("div",{className:"text-center mb-2",children:Object(h.jsx)("h1",{className:"mb-1",children:"Upload Delivery Code file"})}),Object(h.jsx)(i.n,{children:Object(h.jsx)(i.A,{className:"gy-1 pt-75",children:Object(h.jsxs)(i.h,{md:12,xs:12,children:[Object(h.jsx)("div",{className:"d-flex ms-1 me-25",children:g}),Object(h.jsx)("div",{className:"d-flex align-items-end mt-75 ms-1",style:{width:"100%"},children:Object(h.jsxs)("div",{children:[Object(h.jsxs)(i.b,{tag:i.t,name:"file",className:"mb-75 me-75",size:"sm",color:"primary",children:["Upload",Object(h.jsx)(i.q,{type:"file",name:"file",onChange:U,hidden:!0,accept:".xlsx, .xls"})]}),Object(h.jsx)(i.b,{className:"mb-75",color:"secondary",size:"sm",outline:!0,onClick:function(){if(null!==D){var t=new FormData;t.append("file",D),e(Object(b.b)(t)).then((function(e){if(console.log(e),e.error){var t=JSON.parse(e.payload);j.c.error(Object(h.jsx)(O,{name:t.message}),{icon:!1,transition:j.a,hideProgressBar:!0,autoClose:2e3})}else v(!1),P(null),C(""),j.c.success(Object(h.jsx)(x,{name:"Delivery Codes"}),{icon:!1,transition:j.a,hideProgressBar:!0,autoClose:2e3})})).catch((function(e){return e}))}else j.c.error(Object(h.jsx)(O,{name:"Select the Excel file first"}),{icon:!1,transition:j.a,hideProgressBar:!0,autoClose:2e3})},children:"Submit"}),Object(h.jsx)("p",{className:"mb-0",children:"Allowed excel file only with extension .xlsx / .xls"})]})})]})})})]})]})]})}}}]);
//# sourceMappingURL=27.4d2ab11d.chunk.js.map