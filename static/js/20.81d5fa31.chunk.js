(this["webpackJsonpKch-react-admin-dashboard"]=this["webpackJsonpKch-react-admin-dashboard"]||[]).push([[20],{477:function(e,t,s){},478:function(e,t,s){"use strict";var a=s(32),c=s(4),r=s.n(c),l=s(91),n=s(10);t.a=function(e){var t=e.icon,s=e.color,c=e.stats,i=e.renderStats,o=e.statTitle,j=e.className,d=e.statsMargin;return Object(n.jsx)(l.c,{children:Object(n.jsx)(l.d,{className:j,children:Object(n.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(n.jsxs)("div",{children:[i||Object(n.jsx)("h2",{className:r()("fw-bolder",Object(a.a)({"mb-0":!d},d,d)),children:c}),Object(n.jsx)("p",{className:"card-text",children:o})]}),Object(n.jsx)("div",{className:"avatar avatar-stats p-50 m-0 ".concat(s?"bg-light-".concat(s):"bg-light-primary"),children:Object(n.jsx)("div",{className:"avatar-content",children:t})})]})})})}},479:function(e,t,s){},755:function(e,t,s){"use strict";s.r(t);var a=s(13),c=s(36),r=s(26),l=s(1),n=s(130),i=s(91),o=s(10),j={inprogress:"light-warning",resolved:"light-success",unresolved:"light-danger",widget:"light-secondary"},d=[{name:"Serial Number",sortable:!0,minWidth:"200px",sortField:"Name",selector:function(e){return e.serialNumber},cell:function(e){return Object(o.jsx)("div",{className:"d-flex justify-content-left align-items-center",children:Object(o.jsx)("div",{className:"d-flex flex-column",children:Object(o.jsx)("span",{className:"fw-bolder",children:e.serialNumber})})})}},{name:"Customer Name",sortable:!0,minWidth:"200px",sortField:"role",selector:function(e){return e.productId},cell:function(e){return n.a.getState().customers.customers.map((function(t){if(t._id===e.customerId)return Object(o.jsx)("span",{className:"text-capitalize",children:t.name},e.customerId)}))}},{name:"Priority",minWidth:"170px",sortable:!0,sortField:"description",selector:function(e){return e.priority},cell:function(e){return Object(o.jsx)("span",{className:"text-capitalize",children:e.priority})}},{name:"Description",minWidth:"230px",sortable:!0,sortField:"description",selector:function(e){return e.description},cell:function(e){return Object(o.jsx)("span",{className:"text-capitalize",children:e.description})}},{name:"Status",minWidth:"138px",sortable:!0,sortField:"status",selector:function(e){return e.status},cell:function(e){return Object(o.jsx)(i.a,{className:"text-capitalize",color:j[e.status],pill:!0,children:e.status})}}],m=s(484),b=s(128),u=s(480),h=s(487),x=s.n(h),O=s(488),p=s.n(O),f=s(569),g=s(566),v=s(543),N=s(548),S=s(544),w=s(533),C=s(539),k=s(528),y=s(476),P=s(129),F=(s(485),s(477),s(227)),E=s(133),I=s(136),T=function(e){var t=e.name;return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("div",{className:"toastify-header",children:Object(o.jsx)("div",{className:"title-wrapper",children:Object(o.jsxs)("h6",{className:"toast-title fw-bold",children:["You have successfully Updated ",t.toUpperCase()]})})})})},q=function(e){var t=e.name;return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("div",{className:"toastify-header",children:Object(o.jsx)("div",{className:"title-wrapper",children:Object(o.jsxs)("h6",{className:"toast-title fw-bold",children:["Error Updated ",t.toUpperCase()]})})})})},A=function(e){var t=e.store,s=e.handlePerPage,a=e.rowsPerPage,c=e.handleFilter,r=e.searchTerm;function l(e){var s=document.createElement("a"),a=function(e){var s,a=Object.keys(t.data[0]);return s="",s+=a.join(","),s+="\n",e.forEach((function(e){var t=0;a.forEach((function(a){t>0&&(s+=","),s+=e[a],t++})),s+="\n"})),s}(e);if(null!==a){a.match(/^data:text\/csv/i)||(a="data:text/csvcharset=utf-8,".concat(a)),s.setAttribute("href",encodeURI(a)),s.setAttribute("download","export.csv"),s.click()}}return Object(o.jsx)("div",{className:"invoice-list-table-header w-100 me-1 ms-50 mt-2 mb-75",children:Object(o.jsxs)(i.A,{children:[Object(o.jsx)(i.h,{xl:"6",className:"d-flex align-items-center p-0",children:Object(o.jsxs)("div",{className:"d-flex align-items-center w-100",children:[Object(o.jsx)("label",{htmlFor:"rows-per-page",children:"Show"}),Object(o.jsxs)(i.q,{className:"mx-50",type:"select",id:"rows-per-page",value:a,onChange:s,style:{width:"5rem"},children:[Object(o.jsx)("option",{value:"10",children:"10"}),Object(o.jsx)("option",{value:"25",children:"25"}),Object(o.jsx)("option",{value:"50",children:"50"})]}),Object(o.jsx)("label",{htmlFor:"rows-per-page",children:"Entries"})]})}),Object(o.jsxs)(i.h,{xl:"6",className:"d-flex align-items-sm-center justify-content-xl-end justify-content-start flex-xl-nowrap flex-wrap flex-sm-row flex-column pe-xl-1 p-0 mt-xl-0 mt-1",children:[Object(o.jsxs)("div",{className:"d-flex align-items-center mb-sm-0 mb-1 me-1",children:[Object(o.jsx)("label",{className:"mb-0",htmlFor:"search-invoice",children:"Search:"}),Object(o.jsx)(i.q,{id:"search-invoice",className:"ms-50 w-100",type:"text",value:r,onChange:function(e){return c(e.target.value)}})]}),Object(o.jsx)("div",{className:"d-flex align-items-center table-header-actions",children:Object(o.jsxs)(i.E,{className:"me-1",children:[Object(o.jsxs)(i.m,{color:"secondary",caret:!0,outline:!0,children:[Object(o.jsx)(f.a,{className:"font-small-4 me-50"}),Object(o.jsx)("span",{className:"align-middle",children:"Export"})]}),Object(o.jsxs)(i.l,{children:[Object(o.jsxs)(i.k,{className:"w-100",children:[Object(o.jsx)(g.a,{className:"font-small-4 me-50"}),Object(o.jsx)("span",{className:"align-middle",children:"Print"})]}),Object(o.jsxs)(i.k,{className:"w-100",onClick:function(){return l(t.data)},children:[Object(o.jsx)(v.a,{className:"font-small-4 me-50"}),Object(o.jsx)("span",{className:"align-middle",children:"CSV"})]}),Object(o.jsxs)(i.k,{className:"w-100",children:[Object(o.jsx)(N.a,{className:"font-small-4 me-50"}),Object(o.jsx)("span",{className:"align-middle",children:"Excel"})]}),Object(o.jsxs)(i.k,{className:"w-100",children:[Object(o.jsx)(S.a,{className:"font-small-4 me-50"}),Object(o.jsx)("span",{className:"align-middle",children:"PDF"})]}),Object(o.jsxs)(i.k,{className:"w-100",children:[Object(o.jsx)(w.a,{className:"font-small-4 me-50"}),Object(o.jsx)("span",{className:"align-middle",children:"Copy"})]})]})]})})]})]})})},U=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.tickets})),s=Object(b.c)((function(e){return e.employees})),n=Object(l.useState)(null),j=Object(r.a)(n,2),h=j[0],O=j[1],f=Object(l.useState)(!1),g=Object(r.a)(f,2),v=g[0],N=g[1],S=Object(l.useState)("desc"),w=Object(r.a)(S,2),U=w[0],z=w[1],L=Object(l.useState)(""),W=Object(r.a)(L,2),D=W[0],R=W[1],_=Object(l.useState)(1),B=Object(r.a)(_,2),H=B[0],V=B[1],J=Object(l.useState)("id"),K=Object(r.a)(J,2),M=K[0],Y=K[1],G=Object(l.useState)(10),Q=Object(r.a)(G,2),X=Q[0],Z=Q[1],$=Object(l.useState)({value:"",label:"Select Status"}),ee=Object(r.a)($,2),te=ee[0],se=ee[1],ae=Object(l.useState)({value:"",label:"Select Status"}),ce=Object(r.a)(ae,2),re=ce[0],le=ce[1],ne={value:"",label:"Select Employee"},ie=Object(l.useState)(ne),oe=Object(r.a)(ie,2),je=oe[0],de=oe[1],me=Object(l.useState)([]),be=Object(r.a)(me,2),ue=be[0],he=be[1],xe=Object(m.b)({defaultValues:{remarks:""}}),Oe=xe.reset,pe=xe.control,fe=xe.setError,ge=xe.handleSubmit,ve=xe.setValue,Ne=xe.formState.errors,Se=[].concat(Object(c.a)(d),[{name:"Actions",cell:function(e){return Object(o.jsx)("div",{className:"d-flex align-items-center",children:Object(o.jsx)(i.b,{size:"sm",color:"transparent",className:"btn btn-icon",onClick:function(){return function(e){console.log(e);var t=[];le({value:e.status,label:e.status.charAt(0).toUpperCase()+e.status.slice(1)}),O(e),N(!0),console.log(s),s.allUsers.forEach((function(s){s._id===e.employeeId&&de({value:s._id,label:s.name}),t.push({value:s._id,label:s.name})})),he(t),ve("remarks",e.remarks)}(e)},children:Object(o.jsx)(C.a,{className:"font-medium-2"})})})}}]);Object(l.useEffect)((function(){e(Object(F.b)()),e(Object(F.c)({sort:U,sortColumn:M,q:D,page:H,perPage:X,status:te.value})),e(Object(E.c)()),e(Object(I.c)())}),[e,t.tickets.length,t.data.length,U,M,H]),Object(l.useEffect)((function(){console.log(v),v||de(ne)}),[v]);var we=[{value:"",label:"Select Status"},{value:"resolved",label:"Resolved"},{value:"unresolved",label:"Unresolved"},{value:"inprogress",label:"Inprogress"},{value:"widget",label:"Widget"}];return Object(o.jsxs)(l.Fragment,{children:[Object(o.jsxs)(i.c,{children:[Object(o.jsx)(i.e,{children:Object(o.jsx)(i.g,{tag:"h4",children:"Filters"})}),Object(o.jsx)(i.d,{children:Object(o.jsx)(i.A,{children:Object(o.jsxs)(i.h,{md:"12",children:[Object(o.jsx)(i.t,{for:"status-select",children:"Status"}),Object(o.jsx)(u.a,{theme:y.c,isClearable:!1,className:"react-select",classNamePrefix:"select",options:we,value:te,onChange:function(t){se(t),e(Object(F.c)({sort:U,sortColumn:M,q:D,page:H,status:t.value,perPage:X}))}})]})})})]}),Object(o.jsx)(i.c,{className:"overflow-hidden",children:Object(o.jsx)("div",{className:"react-dataTable",children:Object(o.jsx)(p.a,{noHeader:!0,subHeader:!0,sortServer:!0,pagination:!0,responsive:!0,paginationServer:!0,columns:Se,onSort:function(t,s){z(s),Y(t.sortField),e(Object(F.c)({sort:U,sortColumn:M,q:D,page:H,perPage:X,status:te.value}))},sortIcon:Object(o.jsx)(k.a,{}),className:"react-dataTable",paginationComponent:function(){var s=Number(Math.ceil(t.total/X));return Object(o.jsx)(x.a,{previousLabel:"",nextLabel:"",pageCount:s||1,activeClassName:"active",forcePage:0!==H?H-1:0,onPageChange:function(t){return function(t){e(Object(F.c)({sort:U,sortColumn:M,q:D,perPage:X,page:t.selected+1,status:te.value})),V(t.selected+1)}(t)},pageClassName:"page-item",nextLinkClassName:"page-link",nextClassName:"page-item next",previousClassName:"page-item prev",previousLinkClassName:"page-link",pageLinkClassName:"page-link",containerClassName:"pagination react-paginate justify-content-end my-2 pe-1"})},data:function(){var e={status:te.value,q:D},s=Object.keys(e).some((function(t){return e[t].length>0}));return t.data.length>0?t.data:0===t.data.length&&s?[]:t.tickets.slice(0,X)}(),subHeaderComponent:Object(o.jsx)(A,{store:t,searchTerm:D,rowsPerPage:X,handleFilter:function(t){R(t),e(Object(F.c)({sort:U,q:t,sortColumn:M,page:H,perPage:X,status:te.value}))},handlePerPage:function(t){var s=parseInt(t.currentTarget.value);e(Object(F.c)({sort:U,sortColumn:M,q:D,perPage:s,page:H,status:te.value})),Z(s)}})})})}),Object(o.jsxs)(i.u,{isOpen:v,toggle:function(){return N(!v)},className:"modal-dialog-centered modal-lg",children:[Object(o.jsx)(i.w,{className:"bg-transparent",toggle:function(){return N(!v)}}),Object(o.jsxs)(i.v,{className:"px-sm-5 pt-50 pb-5",children:[Object(o.jsx)("div",{className:"text-center mb-2",children:Object(o.jsx)("h1",{className:"mb-1",children:"Update Status"})}),Object(o.jsx)(i.n,{onSubmit:ge((function(t){var s=(new Date).toISOString(),a="";if("resolved"===re.value&&(a=(new Date).toISOString()),Object.values(t).every((function(e){return e.length>0})))e(Object(F.d)({id:h._id,status:re.value,employeeId:je.value,remarks:t.remarks,updatedAt:s,closedAt:a})).then((function(e){e.payload.error||e.error?P.c.error(Object(o.jsx)(q,{name:e.payload.error||e.payload.username||"Status"}),{icon:!1,transition:P.a,hideProgressBar:!0,autoClose:2e3}):P.c.success(Object(o.jsx)(T,{name:e.payload.name||e.payload.username||"Status"}),{icon:!1,transition:P.a,hideProgressBar:!0,autoClose:2e3}),N(!1)})).catch((function(e){P.c.success(Object(o.jsx)(q,{name:e.error||res.error||"Status"}),{icon:!1,transition:P.a,hideProgressBar:!0,autoClose:2e3})}));else for(var c in t)0===t[c].length&&fe(c,{type:"manual"})})),children:Object(o.jsxs)(i.A,{className:"gy-1 pt-75",children:[Object(o.jsxs)(i.h,{md:6,xs:12,children:[Object(o.jsx)(i.t,{className:"form-label",for:"name",children:"Refer To:"}),Object(o.jsx)(u.a,{theme:y.c,isClearable:!1,className:"react-select",classNamePrefix:"select",options:ue,value:je,onChange:function(e){de(e)}})]}),Object(o.jsxs)(i.h,{md:6,xs:12,children:[Object(o.jsx)(i.t,{className:"form-label",for:"status",children:"Status"}),Object(o.jsx)(u.a,{theme:y.c,isClearable:!1,className:"react-select",classNamePrefix:"select",options:we,value:re,onChange:function(e){le(e)}})]}),Object(o.jsxs)(i.h,{md:12,xs:12,children:[Object(o.jsx)(i.t,{className:"form-label",for:"remarks",children:"Remarks"}),Object(o.jsx)(m.a,{control:pe,type:"textarea",id:"remarks",name:"remarks",render:function(e){var t=e.field;return Object(o.jsx)(i.q,Object(a.a)(Object(a.a)({},t),{},{type:"textarea",id:"remarks",placeholder:"",invalid:Ne.remarks&&!0}))}})]}),Object(o.jsxs)(i.h,{xs:12,className:"text-center mt-2 pt-50",children:[Object(o.jsx)(i.b,{type:"submit",className:"me-1",color:"primary",children:"Submit"}),Object(o.jsx)(i.b,{type:"reset",color:"secondary",outline:!0,onClick:function(){Oe({remarks:""}),N(!1)},children:"Discard"})]})]})})]})]})]})},z=s(478);s(479),t.default=function(){var e=Object(b.c)((function(e){return e.tickets})).tickets,t=e.filter((function(e){return"resolved"===e.status.toLowerCase()})),s=e.filter((function(e){return"inprogress"===e.status.toLowerCase()})),a=e.filter((function(e){return"unresolved"===e.status.toLowerCase()}));return Object(o.jsxs)("div",{className:"app-user-list",children:[Object(o.jsxs)(i.A,{children:[Object(o.jsx)(i.h,{lg:"3",sm:"6",children:Object(o.jsx)(z.a,{color:"primary",statTitle:"Total tickets",icon:Object(o.jsx)(v.a,{size:20}),renderStats:Object(o.jsx)("h3",{className:"fw-bolder mb-75",children:e.length})})}),Object(o.jsx)(i.h,{lg:"3",sm:"6",children:Object(o.jsx)(z.a,{color:"success",statTitle:"Resolved tickets",icon:Object(o.jsx)(v.a,{size:20}),renderStats:Object(o.jsx)("h3",{className:"fw-bolder mb-75",children:t.length})})}),Object(o.jsx)(i.h,{lg:"3",sm:"6",children:Object(o.jsx)(z.a,{color:"warning",statTitle:"Inprogress tickets",icon:Object(o.jsx)(v.a,{size:20}),renderStats:Object(o.jsx)("h3",{className:"fw-bolder mb-75",children:s.length})})}),Object(o.jsx)(i.h,{lg:"3",sm:"6",children:Object(o.jsx)(z.a,{color:"danger",statTitle:"Unresolved tickets",icon:Object(o.jsx)(v.a,{size:20}),renderStats:Object(o.jsx)("h3",{className:"fw-bolder mb-75",children:a.length})})})]}),Object(o.jsx)(U,{})]})}}}]);
//# sourceMappingURL=20.81d5fa31.chunk.js.map